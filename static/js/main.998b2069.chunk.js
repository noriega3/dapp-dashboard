(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{151:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(56),i=a.n(s),l=(a(378),a(376),a(374),a(150)),o=a.n(l),c=a(32),u=a.n(c),h=a(11),d=a.n(h),f=a(20),m=a.n(f),p=a(46),v=a.n(p),g=a(57),E=a.n(g),b=a(27),S=a.n(b),y=a(16),C=a.n(y),w=a(149),k=a.n(w),N=a(148),W=a.n(N),x=a(19),A=a.n(x),B=a(147),V=a.n(B),M=a(10),D=a.n(M),I=a(146),R=a(76),F=a.n(R),P=a(22);function O(e){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");q(e.prototype,t&&t.prototype),t&&q(e,t)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t,a){return t&&G(e.prototype,t),a&&G(e,a),e}function j(e,t){return!t||"object"!==O(t)&&"function"!==typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var U="0x3430d3fc79e35f33bb69c4a0b4b89bc9ee107897",z=new V.a.init("97JCGNIUANRCGTMSG3JZMHH2E8FI4FRYM1","kovan",3e3),Q=new A.a(A.a.givenProvider||"http://localhost:8545"),Y=function(e,t,a){if(A.a.givenProvider)return Q.utils.isAddress(t)?e.methods.balanceOf(t).call({from:t}).then(function(e){a(null,e)}).catch(function(e){a(e)}):(a(Error("Address is invalid")),!1);a(Error("Not Connected"))},Z=function(e){function t(e){var a;return T(this,t),(a=j(this,J(t).call(this,e))).state={hasError:!1},a}return _(t,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0,errMessage:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.state.hasError?r.a.createElement(C.a,null,this.state.errMessage):null,r.a.createElement(P.ToastContainer,null),r.a.createElement($,null))}}]),L(t,e),t}(n.Component),$=function(e){function t(e){var a;return T(this,t),(a=j(this,J(t).call(this,e))).state={vaultAddr:U,availableWallets:[],walletAddr:void 0,walletBalance:0,vaultBalance:0,hasError:!1,isInit:!1,logs:[],updating:!1,balanceChange:!1},a.handleWalletChange=a.handleWalletChange.bind(H(H(a))),a.performVaultDeposit=a.performVaultDeposit.bind(H(H(a))),a.performVaultWithdraw=a.performVaultWithdraw.bind(H(H(a))),a.performSearch=a.performSearch.bind(H(H(a))),a.performGetLogs=a.performGetLogs.bind(H(H(a))),a.refreshAccountsList=a.refreshAccountsList.bind(H(H(a))),a.handleWalletChange=a.handleWalletChange.bind(H(H(a))),a.refreshWalletBalance=a.refreshWalletBalance.bind(H(H(a))),a.refreshVaultBalance=a.refreshVaultBalance.bind(H(H(a))),a.contractInstance=!1,a}return _(t,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0,errMessage:e})}},{key:"componentDidMount",value:function(){var e=this;!function(e,t){var a,n;if(A.a.givenProvider)return z.contract.getabi(e).then(function(r){var s=r.result;a=JSON.parse(s),n=new Q.eth.Contract(a,e),t(null,n)}).catch(function(e){console.error(e),t(e)});t(Error("Not Connected"))}(this.state.vaultAddr,function(t,a){t?e.setState({isInit:!1,hasError:!0,errMessage:t.toString()}):(e.contractInstance=a,e.setState({isInit:!0}))})}},{key:"componentWillUnmount",value:function(){this.contractInstance=null}},{key:"componentDidUpdate",value:function(e,t){!D.a.isEqual(t.walletAddr,this.state.walletAddr)&&this.state.walletAddr?(this.refreshWalletBalance(),this.refreshVaultBalance()):D.a.isEqual(t.balanceChange,this.state.balanceChange)||!this.state.balanceChange||this.state.updating||(this.refreshWalletBalance(),this.refreshVaultBalance(),this.performGetLogs(),this.setState({balanceChange:!1}))}},{key:"handleWalletChange",value:function(e){this.setState({walletAddr:e})}},{key:"performVaultWithdraw",value:function(e){var t=this,a=this.state.walletAddr,n=D.a.toString(e);this.setState({updating:!0},function(){return function(e,t,a,n){if(A.a.givenProvider){var r=Q.utils.toWei(a,"ether");return e.methods.withdraw(r).send({from:t}).on("confirmation",function(e,t){5===e&&n(null,t)}).on("error",function(e){n(e),console.error(e)})}n(Error("Not Connected"))}(t.contractInstance,a,n,function(e,a){e&&(P.toast.error("Error Withdrawing!"),console.error(e)),t.setState({updating:!1,balanceChange:!0})})})}},{key:"performVaultDeposit",value:function(e){var t=this,a=this.state.walletAddr;this.setState({updating:!0},function(){return function(e,t,a,n){if(A.a.givenProvider){var r=Q.utils.toWei(a,"ether");return e.methods.deposit().send({from:t,value:r}).on("confirmation",function(e,t){5===e&&n(null,t)}).on("error",function(e){n(e),console.error(e)})}n(Error("Not Connected"))}(t.contractInstance,a,e,function(e,a){e&&(P.toast.error("Error Depositing!"),console.error(e)),t.setState({updating:!1,balanceChange:!0})})})}},{key:"refreshAccountsList",value:function(){var e=this;this.setState({updating:!0},function(){return function(e){if(A.a.givenProvider)return Q.eth.getAccounts().then(function(t){e(null,t)}).catch(function(t){e(t)});e(Error("Not Connected"))}(function(t,a){var n=a&&a.length>0?a:[];if(t)return P.toast.error("Error Refreshing Accounts!"),void console.error(t);e.setState({walletAddr:D.a.head(a),availableWallets:n,updating:!1})})})}},{key:"refreshWalletBalance",value:function(){var e=this,t=this.state.walletAddr;this.setState({updating:!0},function(){return function(e,t){if(A.a.givenProvider)return Q.utils.isAddress(e)?z.account.balance(e).then(function(e){var a=e.result;t(null,a)}).catch(function(e){t(e)}):(t(Error("Address is invalid")),!1);t(Error("Not Connected"))}(t,function(a,n){a&&(P.toast.error("Error Refreshing Wallet Balance!"),console.error(a)),e.setState({walletAddr:t,walletBalance:n||-1,updating:!1})})})}},{key:"refreshVaultBalance",value:function(){var e=this,t=this.state,a=t.walletAddr,n=t.vaultAddr;this.setState({updating:!0},function(){return Y(e.contractInstance,a,function(t,r){t&&(P.toast.error("Error Refreshing Vault Balance!"),console.error(t)),e.setState({vaultAddr:n,walletAddr:a,vaultBalance:r||0,updating:!1})})})}},{key:"performSearch",value:function(e,t){return Y(this.contractInstance,e,t)}},{key:"performGetLogs",value:function(){var e=this;this.setState({updating:!0},function(){return function(e,t){if(A.a.givenProvider){var a=[];return e.getPastEvents("allEvents",{fromBlock:"earliest",topics:[["0x884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a9424364","0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c"]]}).then(function(e){a=D.a.sortBy(e,["blockNumber"]).reverse(),t(null,a)}).catch(function(e){t(e)})}t(Error("Not Connected"))}(e.contractInstance,function(t,a){t?e.setState({hasError:!0,errMessage:t.toString(),updating:!1}):e.setState({logs:a,updating:!1})})})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(C.a,null,r.a.createElement("div",{className:"mui--text-danger"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})," ",this.state.errMessage)):this.state.isInit?r.a.createElement("div",{className:"dashboard ".concat(this.state.updating?"api-updating":"")},r.a.createElement(o.a,null),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{xl:"8","xl-offset":2,lg:12},r.a.createElement(ae,{updating:this.state.updating,accounts:this.state.availableWallets,address:this.state.walletAddr,onSelect:this.handleWalletChange,accountsFunc:this.refreshAccountsList}))),r.a.createElement(m.a,null,r.a.createElement(d.a,{xl:"4","xl-offset":2,lg:6},r.a.createElement(ee,{updating:this.state.updating,address:this.state.walletAddr,balance:this.state.walletBalance,onSubmit:this.performVaultDeposit,balanceFunc:this.refreshWalletBalance})),r.a.createElement(d.a,{xl:"4",lg:6},r.a.createElement(te,{updating:this.state.updating,address:this.state.walletAddr,balance:this.state.vaultBalance,onSubmit:this.performVaultWithdraw,balanceFunc:this.refreshVaultBalance})))),r.a.createElement("hr",null),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{xl:"8","xl-offset":2,lg:12},r.a.createElement(X,{searchFunc:this.performSearch})))),r.a.createElement("hr",null),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{xl:"8","xl-offset":2,lg:12},r.a.createElement(ne,{updating:this.state.updating,logs:this.state.logs,logsFunc:this.performGetLogs})))),r.a.createElement(P.ToastContainer,null)):r.a.createElement(C.a,null,"Starting..")}}]),L(t,e),t}(n.Component),K=Z,X=function(e){function t(e){var a;return T(this,t),(a=j(this,J(t).call(this,e))).state={address:!1,balance:!1,searching:!1,searched:!1,hasError:!1},a.onSubmit=a.onSubmit.bind(H(H(a))),a.handleOnChange=a.handleOnChange.bind(H(H(a))),a.onInputChange=a.onInputChange.bind(H(H(a))),a.onInputChange=D.a.debounce(a.onInputChange,1e3),a}return _(t,[{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.searching)return!1;this.setState({searched:!1,searching:!0},function(){t.props.searchFunc(t.state.address,function(e,a){e?t.setState({searched:!1,searching:!1,hasError:!0,errMessage:e.toString()}):t.setState({searched:!0,searching:!1,balance:a})})})}},{key:"onInputChange",value:function(e){var t=e.target.value;this.setState({address:t,searching:!1,searched:!1})}},{key:"handleOnChange",value:function(e){this.setState({address:e.target.value,searching:!1,searched:!1,hasError:!1,errMessage:""})}},{key:"renderSearchResult",value:function(){return this.state.hasError?r.a.createElement("div",{className:"mui--text-danger mui--text-caption"},this.state.errMessage):this.state.searching?r.a.createElement(C.a,null,"Searching.."):this.state.searched?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{md:12},r.a.createElement(C.a,null,r.a.createElement("div",null,"Address: ",this.state.address),r.a.createElement("div",null,"Vault Balance: ",Q.utils.fromWei("".concat(this.state.balance))," ETH")))))):null}},{key:"render",value:function(){return r.a.createElement(C.a,{className:"optionsPanel"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("div",{className:"mui--text-headline"},"Find Wallet Balance"),r.a.createElement(u.a,{fluid:!0},r.a.createElement(m.a,null,r.a.createElement(d.a,{md:12},r.a.createElement(v.a,{onSubmit:this.onSubmit},r.a.createElement(E.a,{label:"Enter a wallet address",floatingLabel:!0,onChange:this.handleOnChange,invalid:this.state.invalid}),this.renderSearchResult(),r.a.createElement("div",{className:"actions"},r.a.createElement(S.a,{className:"searchButton",color:"primary",onClick:this.onSubmit,disabled:this.state.searching||this.state.searched},"Get Balance")))))))}}]),L(t,e),t}(n.Component),ee=function(e){function t(e){var a;return T(this,t),(a=j(this,J(t).call(this,e))).state={value:0,hasError:!1,errMessage:""},a.onSubmit=a.onSubmit.bind(H(H(a))),a.onChange=a.onChange.bind(H(H(a))),a.onRefresh=a.onRefresh.bind(H(H(a))),a}return _(t,[{key:"onChange",value:function(e){this.setState({value:e.target.value,hasError:!1,errMessage:!1})}},{key:"onRefresh",value:function(e){e.preventDefault(),this.props.balanceFunc(this.props.account)}},{key:"onSubmit",value:function(e){var t,a=this;if(e.preventDefault(),this.props.updating)return!1;var n=Q.utils.fromWei("".concat(this.props.balance))||0;return!this.state.value||this.state.value<=0?(this.setState({hasError:!0,errMessage:"Value cannot be 0 or negative"}),console.error("Value cannot be 0 or negative")):this.state.value>n?(this.setState({hasError:!0,errMessage:"Value over max balance"}),console.error("Value over max balance")):(t=D.a.toString(this.state.value))?void this.setState({hasError:!1,errMessage:""},function(){a.props.onSubmit(t)}):(this.setState({hasError:!0,errMessage:"Invalid value"}),console.error("Value over max balance"))}},{key:"render",value:function(){if(!this.props.address)return null;var e=Q.utils.fromWei("".concat(this.props.balance))||0;return r.a.createElement(C.a,{className:"optionsPanel"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fas fa-arrow-circle-down positiveColor"})),r.a.createElement("div",{className:"mui--text-headline"},"Deposit To Vault"),r.a.createElement(v.a,{onSubmit:this.onSubmit},r.a.createElement(E.a,{placeholder:"Amount",type:"number",value:this.state.value,onChange:this.onChange,invalid:this.state.hasError,required:!0}),this.state.hasError&&r.a.createElement("div",{className:"mui--text-danger mui--text-caption"},this.state.errMessage),r.a.createElement("div",{className:"mui--text-caption balance"},"Wallet Balance: ",e," ETH",r.a.createElement(S.a,{variant:"flat",size:"small",onClick:this.onRefresh,disabled:this.props.updating},r.a.createElement("i",{className:"fas fa-sync"}))),r.a.createElement("div",{className:"actions"},r.a.createElement(S.a,{color:"primary",disabled:this.props.balance<=0||this.props.updating,onClick:this.onSubmit}," Deposit"))))}}]),L(t,e),t}(n.Component),te=function(e){function t(e){var a;return T(this,t),(a=j(this,J(t).call(this,e))).state={value:0,invalid:!1},a.onSubmit=a.onSubmit.bind(H(H(a))),a.onChange=a.onChange.bind(H(H(a))),a.onRefresh=a.onRefresh.bind(H(H(a))),a}return _(t,[{key:"onChange",value:function(e){this.setState({value:e.target.value,invalid:!1})}},{key:"onRefresh",value:function(e){e.preventDefault(),this.props.balanceFunc(this.props.account)}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.props.updating)return!1;var a=Q.utils.fromWei("".concat(this.props.balance))||0;return!this.state.value||this.state.value<=0?(this.setState({invalid:"Value cannot be 0 or negative"}),console.error("Value cannot be 0 or negative")):this.state.value>a?(this.setState({invalid:"Value over max balance"}),console.error("Value over max balance")):void this.setState({invalid:!1},function(){t.props.onSubmit(t.state.value)})}},{key:"render",value:function(){if(!this.props.address)return null;var e=Q.utils.fromWei("".concat(this.props.balance))||0;return r.a.createElement(C.a,{className:"optionsPanel"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fas fa-arrow-circle-up negativeColor"})),r.a.createElement("div",{className:"mui--text-headline"},"Withdraw From Vault"),r.a.createElement(v.a,{onSubmit:this.onSubmit},r.a.createElement(E.a,{placeholder:"Amount",type:"number",value:this.state.value,onChange:this.onChange,invalid:this.state.invalid,required:!0}),this.state.invalid&&r.a.createElement("div",{className:"mui--text-danger mui--text-caption"},this.state.invalid),r.a.createElement("div",{className:"mui--text-caption balance"},"Vault Balance: ",e," ETH",r.a.createElement(S.a,{variant:"flat",size:"small",onClick:this.onRefresh,disabled:this.props.updating},r.a.createElement("i",{className:"fas fa-sync"}))),r.a.createElement("div",{className:"actions"},r.a.createElement(S.a,{color:"primary",disabled:this.props.balance<=0||this.props.updating,onClick:this.onSubmit}," Withdraw"))))}}]),L(t,e),t}(n.Component),ae=function(e){function t(e){var a;return T(this,t),(a=j(this,J(t).call(this,e))).onSelect=a.onSelect.bind(H(H(a))),a.onSubmit=a.onSubmit.bind(H(H(a))),a}return _(t,[{key:"shouldComponentUpdate",value:function(e){return!D.a.isEqual(e.accounts,this.props.accounts)||(!(D.a.isEqual(e.address,this.props.address)||!this.props.address)||!D.a.isEqual(e.updating,this.props.updating))}},{key:"componentDidMount",value:function(){this.props.accountsFunc()}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.props.updating)return!1;this.props.accountsFunc()}},{key:"onSelect",value:function(e){this.props.onSelect&&this.props.onSelect(e.target.value)}},{key:"render",value:function(){return r.a.createElement(C.a,{className:"optionsPanel"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fas fa-wallet"})),r.a.createElement("div",{className:"mui--text-headline"},"Selected Wallet"),r.a.createElement(v.a,{inline:!0,onSubmit:this.onSubmit},r.a.createElement(k.a,{name:"wallet",value:this.props.address,onChange:this.onSelect,disabled:this.props.updating},this.props.accounts.map(function(e){return r.a.createElement(W.a,{key:e,value:e,label:e})})),r.a.createElement(S.a,{variant:"flat",onClick:this.onSubmit,disabled:this.props.updating},r.a.createElement("i",{className:"fas fa-sync"}))))}}]),L(t,e),t}(n.Component),ne=function(e){function t(e){var a;return T(this,t),(a=j(this,J(t).call(this,e))).handleOnClick=a.handleOnClick.bind(H(H(a))),a}return _(t,[{key:"componentDidMount",value:function(){this.props.logsFunc()}},{key:"handleOnClick",value:function(e){e.preventDefault(),this.props.logsFunc()}},{key:"onCopy",value:function(){P.toast.success("Copied address to clipboard")}},{key:"render",value:function(){var e=this,t=function(e){return D.a.isEqual(e,"Deposit")},a=function(e){return D.a.isEqual(e,"Withdraw")};return r.a.createElement(C.a,{className:"vaultTransactionsPanel"},r.a.createElement("div",{className:"mui--text-headline"},"Recent Vault Transactions",r.a.createElement(S.a,{variant:"flat",size:"small",onClick:this.handleOnClick,disabled:this.props.updating},r.a.createElement("i",{className:"fas fa-sync"}))),r.a.createElement("hr",null),r.a.createElement(u.a,{className:"overflowList"},this.props.logs.map(function(n){n.address;var s=n.returnValues,i=s.amount,l=s.user,o=n.event,c=n.id;return r.a.createElement(F.a,{key:c,overflow:!0,throttle:100,height:72},r.a.createElement(C.a,{className:"logMessage "+function(e){return t(e)?"positiveColor":a(e)?"negativeColor":""}(o)},r.a.createElement(m.a,null,r.a.createElement(d.a,{lg:2,sm:2},t(o)?r.a.createElement("i",{className:"fas fa-arrow-circle-down positiveColor"}):a(o)?r.a.createElement("i",{className:"fas fa-arrow-circle-up negativeColor"}):""),r.a.createElement(d.a,{lg:5,sm:8,className:"middleContent"},r.a.createElement(m.a,null,r.a.createElement(d.a,{lg:12},o)),r.a.createElement(m.a,null,r.a.createElement(d.a,{lg:12},r.a.createElement(I.CopyToClipboard,{text:l,className:"copy",onCopy:e.onCopy},r.a.createElement("div",null,r.a.createElement("span",null,l||"n/a"," ")," ",r.a.createElement("i",{className:"far fa-copy"})))))),r.a.createElement(d.a,{lg:5,sm:12,className:"amount"},Q.utils.fromWei("".concat(i))," ETH"))))})))}}]),L(t,e),t}(n.Component),re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(K,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/dapp-dashboard",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/dapp-dashboard","/service-worker.js");re?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):se(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):se(e)})}}()},272:function(e,t){},273:function(e,t){},336:function(e,t){},338:function(e,t){},376:function(e,t,a){},378:function(e,t,a){},391:function(e,t,a){a(390),e.exports=a(151)}},[[391,0,1]]]);
//# sourceMappingURL=main.998b2069.chunk.js.map